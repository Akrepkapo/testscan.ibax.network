import{i as a,A as e,B as t,I as l}from"../element-plus/element-plus.ec3bfd4a.js";import"../vue/vue.35a5c883.js";import{C as s,k as n,a as o,f as i,i as c,j as r,g as d,e as m,t as p}from"../../assets/index.fffbb3d2.js";import{u,a as f}from"../vue-router/vue-router.62720988.js";import{D as h}from"../DialogAccount/DialogAccount.3b78b309.js";import{_ as v}from"../vue-qr/vue-qr.0ca12301.js";import{t as b,e as g,X as y,w as _,x as w,W as k,o as $,c as j,a as x,u as P,K as S,T as D,R as A,P as C,O as H,$ as z}from"../@vue/@vue.077a65af.js";import"../@vueuse/@vueuse.57a4e826.js";import"../@element-plus/@element-plus.19eacc1c.js";import"../dayjs/dayjs.7a5f879f.js";import"../@intlify/@intlify.d33e2919.js";import"../lodash-es/lodash-es.e287ec0c.js";import"../@ctrl/@ctrl.17547d95.js";import"../escape-html/escape-html.d572c0fd.js";import"../@popperjs/@popperjs.12a79995.js";import"../normalize-wheel-es/normalize-wheel-es.db30398b.js";import"../vue-axios/vue-axios.0d80ef0e.js";import"../decimal.js/decimal.js.77638b52.js";import"../vue-clipboard3/vue-clipboard3.f8057bcc.js";import"../clipboard/clipboard.eec53070.js";import"../vue-i18n/vue-i18n.e0b6e81d.js";import"../vuex/vuex.389a1fed.js";import"../axios/axios.3ae77db0.js";import"../echarts/echarts.cc448593.js";import"../zrender/zrender.a8917a70.js";import"../tslib/tslib.e35f93b8.js";import"../echarts-gl/echarts-gl.4fe9f180.js";import"../claygl/claygl.59c2afb1.js";import"../centrifuge/centrifuge.c0d375ba.js";import"../vue-json-viewer/vue-json-viewer.32907f0d.js";import"../path-browserify/path-browserify.3d3258d8.js";import"../js-binary-schema-parser/js-binary-schema-parser.f718aa23.js";const I={class:"meta chain"},B={class:"chain-content"},M={class:"panel-content-chart"},N={class:"panel-content-chart-box"},R={key:0,class:"meta-top meta-info"},V={class:"meta-top-left"},W={class:"meta-info-wrap"},q={class:"meta-info-svg",style:{cursor:"pointer"}},T=["src"],X={key:0,class:"meta-info-hash"},E={class:"chain-line-beyond"},G={class:"meta-top-right"},K={class:"meta-info-box"},O={class:"meta-info-item"},F={class:"meta-info-date"},J=x("i",{class:"iconfont el-a-Energyvalue"},null,-1),L={class:"meta-info-item meta-info-item-address"},Q={class:"meta-info-date"},U=x("i",{class:"iconfont el-a-totalcomputingpower"},null,-1),Y={class:"meta-info-item"},Z={class:"meta-info-date"},aa=x("i",{class:"iconfont el-pledge1"},null,-1),ea={class:"chain-account-item-symbol"},ta=x("i",{class:"iconfont el-Description meta-info-icon"},null,-1),la={class:"meta-info-item"},sa={class:"meta-info-date"},na=x("i",{class:"iconfont el-a-TotalRewards"},null,-1),oa={class:"chain-account-item-symbol"},ia=x("i",{class:"iconfont el-Description meta-info-icon"},null,-1),ca={class:"meta-info-item meta-info-item-address"},ra={class:"meta-info-date"},da=x("i",{class:"iconfont el-output"},null,-1),ma={class:"chain-account-item-symbol"},pa=x("i",{class:"iconfont el-Description meta-info-icon"},null,-1),ua={class:"meta-info-item"},fa={class:"meta-info-date"},ha=x("i",{class:"iconfont el-a-pledgeamount"},null,-1),va={class:"chain-account-item-symbol"},ba=x("i",{class:"iconfont el-Description meta-info-icon"},null,-1),ga={class:"meta-info-item"},ya={class:"meta-info-date"},_a=x("i",{class:"iconfont el-a-pledgecycle"},null,-1),wa={class:"chain-account-item-symbol"},ka=x("i",{class:"iconfont el-Description meta-info-icon"},null,-1),$a={class:"meta-info-flex"},ja={class:"meta-info-date"},xa=x("i",{class:"iconfont el-a-generateaddress"},null,-1),Pa=x("i",{class:"iconfont el-Description meta-info-icon"},null,-1),Sa={class:"meta-info-flex"},Da={class:"meta-info-date"},Aa=x("i",{class:"iconfont el-a-Generationtime"},null,-1),Ca={class:"chain-account-item-symbol"},Ha={class:"meta-title panel-item-child-title"},za={class:"chain-content"},Ia={class:"panel-content-chart"},Ba={class:"panel-content-chart-box chain-content-table"},Ma={class:"panel-table"},Na={class:"panel-content-table"},Ra={class:"meta-title panel-item-child-title"},Va={class:"chain-content"},Wa={class:"panel-content-chart"},qa={class:"panel-content-chart-box chain-content-table"},Ta={class:"panel-table"},Xa={class:"panel-content-table"},Ea={key:0},Ga={class:"chain-account-item-symbol"},Ka={key:0},Oa={key:1,class:"chain-account-item-symbol"},Fa={key:0},Ja={key:1},La={key:0},Qa={key:1},Ua={class:"meta-title"},Ya={class:"chain-content"},Za={class:"panel-content-chart"},ae={class:"panel-content-chart-box chain-content-table"},ee={class:"panel-table"},te={class:"panel-content-table"},le={key:0},se={class:"chain-account-item-symbol"},ne={class:"panel-content-table-page"};var oe=v({setup(v){const oe=b("axios"),ie=b("isMobile"),ce=g(!1),re=u(),de=g("");f();const me=g(""),pe=g(null),ue=g(null),fe=y({info:{},pledge:[],mining:[],history:[],totalHistory:0,totalPledge:0,miningPage:{page:1,limit:20}}),he={search:1},ve={search:1,page:1,limit:10,order:"id desc"},be={search:1,page:1,limit:10,order:"id desc"},ge={search:1,page:1,limit:20,order:"id desc"};let ye=[];const _e=async a=>{const e=await oe.post("get_nft_stake_info",a);if(0===e.code){const a=e.data.list;if(fe.totalPledge=e.data.total,a){ye=[...a,...ye];const e=p(ye);fe.pledge=e}}},we=async a=>{const e=await oe.post("get_nft_tx_info",a);0===e.code&&(fe.mining=e.data.list,fe.miningPage.page=e.data.page,fe.miningPage.limit=e.data.limit,fe.miningPage.total=e.data.total)};let ke=[];const $e=async a=>{const e=await oe.post("get_nft_history_info",a);if(0===e.code){const a=e.data.list;if(fe.totalHistory=e.data.total,a){ke=[...a,...ke];const e=p(ke);fe.history=e}}};_((()=>{if(re.params.hash){const a=re.params.hash;ge.search=be.search=he.search=ve.search=me.value=a,me.value=a,fe.history=[],fe.pledge=[],ke=[],ye=[],(async a=>{const e=await oe.get(`get_nft_info/${a.search}`);0===e.code&&(fe.info=e.data)})(he),_e(be),we(ge),$e(ve)}}));const je=()=>{++ve.page;const a=fe.totalHistory,e=ve.page,t=ve.limit;Math.ceil(a/t)>=e&&$e(ve)},xe=()=>{++be.page;const a=fe.totalPledge,e=be.page,t=be.limit;Math.ceil(a/t)>=e&&_e(be)};w((()=>{if(pe.value){const a=pe.value.layout.table.refs.bodyWrapper,e=ue.value.layout.table.refs.bodyWrapper;s(a,je),s(e,xe)}}));const Pe=a=>{ge.page=a,we(ge)},Se=a=>{ce.value=a},De=/^\d{4}-\d{4}-\d{4}-\d{4}-\d{4}$/,Ae=d();return(s,d)=>{const p=a,u=k("router-link"),f=e,v=t,b=l;return $(),j("div",I,[x("div",B,[x("div",M,[x("div",N,[P(fe).info?($(),j("div",R,[x("div",V,[x("div",W,[x("div",q,[P(fe).info.id?($(),j("img",{key:0,src:`${P(Ae)}/api/v2/get_nft_file/${P(fe).info.id}`,alt:"logo",onClick:d[0]||(d[0]=a=>{return e=P(fe).info.id,void(ie||(ce.value=!0,de.value=e));var e})},null,8,T)):S("v-if",!0)]),P(fe).info.hash?($(),j("div",X,[x("span",E,D(P(fe).info.hash),1),x("i",{class:"iconfont el-Reproduction",onClick:d[1]||(d[1]=a=>P(n)(P(fe).info.hash))})])):S("v-if",!0)])]),x("div",G,[x("div",K,[x("div",O,[x("div",F,[J,x("span",null,D(s.$t("meta.power"))+"：",1)]),x("span",null,D(P(o)(String(P(fe).info.energy_point))),1)]),x("div",L,[x("div",Q,[U,x("span",null,D(s.$t("meta.force"))+"：",1)]),x("span",null,D(P(o)(String(P(fe).info.energy_power))),1)]),x("div",Y,[x("div",Z,[aa,x("span",null,D(s.$t("account.cash"))+"：",1)]),x("span",null,D(P(o)(String(P(fe).info.stake_count))),1),x("span",ea,D(s.$t("meta.seconds")),1),A(p,{class:"item",effect:"dark",content:s.$t("meta.totalNum"),placement:"bottom"},{default:C((()=>[ta])),_:1},8,["content"])]),x("div",la,[x("div",sa,[na,x("span",null,D(s.$t("meta.reward"))+"：",1)]),x("span",null,D(P(o)(String(P(fe).info.reward_count))),1),x("span",oa,D(s.$t("meta.seconds")),1),A(p,{class:"item",effect:"dark",content:s.$t("meta.totalget"),placement:"bottom"},{default:C((()=>[ia])),_:1},8,["content"])]),x("div",ca,[x("div",ra,[da,x("span",null,D(s.$t("account.ins"))+"：",1)]),x("span",null,D(P(i)(String(P(fe).info.nft_ins))),1),x("span",ma,D(s.$t("page.symbol")),1),A(p,{class:"item",effect:"dark",content:s.$t("meta.totalRecard"),placement:"bottom"},{default:C((()=>[pa])),_:1},8,["content"])]),x("div",ua,[x("div",fa,[ha,x("span",null,D(s.$t("meta.amount"))+"：",1)]),x("span",null,D(P(i)(String(P(fe).info.stake_amount))),1),x("span",va,D(s.$t("page.symbol")),1),A(p,{class:"item",effect:"dark",content:s.$t("meta.currentCoin"),placement:"bottom"},{default:C((()=>[ba])),_:1},8,["content"])]),x("div",ga,[x("div",ya,[_a,x("span",null,D(s.$t("meta.cycle"))+"：",1)]),x("span",null,D(P(o)(String(P(fe).info.cycle))),1),x("span",wa,D(s.$t("meta.day")),1),A(p,{class:"item",effect:"dark",content:s.$t("meta.currentPled"),placement:"bottom"},{default:C((()=>[ka])),_:1},8,["content"])])]),x("div",$a,[x("div",ja,[xa,x("span",null,D(s.$t("meta.address"))+"：",1)]),P(fe).info.owner?($(),H(u,{key:0,to:{name:"AccountAddress",params:{address:P(fe).info.owner}}},{default:C((()=>[x("span",null,D(P(fe).info.owner),1),A(p,{class:"item",effect:"dark",content:s.$t("meta.create"),placement:"bottom"},{default:C((()=>[Pa])),_:1},8,["content"])])),_:1},8,["to"])):S("v-if",!0)]),x("div",Sa,[x("div",Da,[Aa,x("span",null,D(s.$t("panel.date"))+"：",1)]),x("div",null,[x("span",null,D(P(c)(String(P(fe).info.date_created))),1),x("span",Ca," ("+D(P(r)(String(P(fe).info.date_created)))+") ",1)])])])])):S("v-if",!0)])])]),x("div",Ha,D(s.$t("meta.history")),1),x("div",za,[x("div",Ia,[x("div",Ba,[x("div",Ma,[x("div",Na,[A(v,{ref_key:"tableHistory",ref:pe,"max-height":"400",data:P(fe).history,stripe:"",style:{width:"100%"}},{default:C((()=>[A(f,{label:s.$t("account.hash"),width:"250","show-overflow-tooltip":""},{default:C((a=>[a.row.tx_hash?($(),H(u,{key:0,to:{name:"HashValue",params:{value:a.row.tx_hash}}},{default:C((()=>[x("span",null,D(a.row.tx_hash),1)])),_:2},1032,["to"])):S("v-if",!0)])),_:1},8,["label"]),A(f,{label:s.$t("meta.nft"),width:"250","show-overflow-tooltip":""},{default:C((a=>[a.row.nft_hash&&a.row.id?($(),H(u,{key:0,to:{name:"MetaId",params:{id:a.row.id,hash:a.row.nft_hash}}},{default:C((()=>[z(D(a.row.nft_hash),1)])),_:2},1032,["to"])):S("v-if",!0)])),_:1},8,["label"]),A(f,{label:s.$t("account.time")},{default:C((a=>[x("span",null,D(P(m)(a.row.time)),1)])),_:1},8,["label"]),A(f,{label:s.$t("meta.event")},{default:C((a=>[x("span",null,D(a.row.events),1)])),_:1},8,["label"]),A(f,{label:s.$t("ecolib.contract")},{default:C((a=>[x("span",null,D(a.row.contract),1)])),_:1},8,["label"]),A(f,{label:s.$t("meta.source"),"show-overflow-tooltip":""},{default:C((a=>[De.test(a.row.source)?($(),H(u,{key:0,to:{name:"AccountAddress",params:{address:a.row.source}}},{default:C((()=>[x("span",null,D(a.row.source),1)])),_:2},1032,["to"])):($(),H(u,{key:1,to:{name:"HashValue",params:{value:a.row.source}}},{default:C((()=>[x("span",null,D(a.row.source),1)])),_:2},1032,["to"]))])),_:1},8,["label"])])),_:1},8,["data"])])])])])]),x("div",Ra,D(s.$t("meta.pledre")),1),x("div",Va,[x("div",Wa,[x("div",qa,[x("div",Ta,[x("div",Xa,[A(v,{ref_key:"tablePledge",ref:ue,"max-height":"400",data:P(fe).pledge,stripe:"",style:{width:"100%"}},{default:C((()=>[A(f,{label:s.$t("account.hash"),width:"250","show-overflow-tooltip":""},{default:C((a=>[a.row.tx_hash?($(),H(u,{key:0,class:"chain-line-logo",to:{name:"HashValue",params:{value:a.row.tx_hash}}},{default:C((()=>[x("span",null,D(a.row.tx_hash),1)])),_:2},1032,["to"])):S("v-if",!0)])),_:1},8,["label"]),A(f,{label:s.$t("panel.block")},{default:C((a=>[a.row.block_id?($(),H(u,{key:0,to:{name:"BlockId",params:{id:a.row.block_id}}},{default:C((()=>[z(D(a.row.block_id),1)])),_:2},1032,["to"])):S("v-if",!0)])),_:1},8,["label"]),A(f,{label:s.$t("account.time")},{default:C((a=>[x("span",null,D(P(m)(a.row.time)),1)])),_:1},8,["label"]),A(f,{label:s.$t("meta.amount")},{default:C((a=>[a.row.stake_amount?($(),j("span",Ea,D(P(i)(String(a.row.stake_amount))),1)):S("v-if",!0),x("span",Ga,D(s.$t("page.symbol")),1)])),_:1},8,["label"]),A(f,{label:s.$t("meta.cycle")},{default:C((a=>[a.row.cycle?($(),j("span",Ka,D(P(o)(String(a.row.cycle))),1)):S("v-if",!0),a.row.cycle?($(),j("span",Oa,D(s.$t("meta.day")),1)):S("v-if",!0)])),_:1},8,["label"]),A(f,{label:s.$t("meta.value")},{default:C((a=>[a.row.energy_power?($(),j("span",Fa,D(P(o)(String(a.row.energy_power))),1)):($(),j("span",Ja,"0"))])),_:1},8,["label"]),A(f,{label:s.$t("meta.status")},{default:C((a=>[a.row.stake_status?($(),j("span",La,D(s.$t("meta.under")),1)):($(),j("span",Qa,D(s.$t("meta.maturity")),1))])),_:1},8,["label"])])),_:1},8,["data"])])])])])]),x("div",Ua,D(s.$t("meta.mining")),1),x("div",Ya,[x("div",Za,[x("div",ae,[x("div",ee,[x("div",te,[A(v,{data:P(fe).mining,stripe:"",style:{width:"100%"}},{default:C((()=>[A(f,{label:s.$t("panel.block")},{default:C((a=>[a.row.block_id?($(),H(u,{key:0,to:{name:"BlockId",params:{id:a.row.block_id}}},{default:C((()=>[z(D(a.row.block_id),1)])),_:2},1032,["to"])):S("v-if",!0)])),_:1},8,["label"]),A(f,{label:s.$t("account.time"),align:"center"},{default:C((a=>[x("span",null,D(P(m)(a.row.time)),1)])),_:1},8,["label"]),A(f,{label:s.$t("account.ins"),align:"center"},{default:C((a=>[a.row.nft_ins?($(),j("span",le,D(P(i)(String(a.row.nft_ins))),1)):S("v-if",!0),x("span",se,D(s.$t("page.symbol")),1)])),_:1},8,["label"])])),_:1},8,["data"])])]),x("div",ne,[A(b,{small:"",background:"","hide-on-single-page":"",layout:"prev, pager, next","pager-count":P(ie)?5:11,"current-page":Number(P(fe).miningPage.page),"page-size":Number(P(fe).miningPage.limit),total:Number(P(fe).miningPage.total),onCurrentChange:Pe},null,8,["pager-count","current-page","page-size","total"])])])])]),ce.value?($(),H(h,{key:0,"is-dialog":ce.value,"img-id":de.value,onClose:Se},null,8,["is-dialog","img-id"])):S("v-if",!0)])}}},[["__file","C:/gitrepo/lib.venas.io/IBAX/scan.ibax.io/src/pages/meta/metaId.vue"]]);export{oe as default};
