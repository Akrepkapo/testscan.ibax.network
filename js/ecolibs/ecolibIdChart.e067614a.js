import{A as a,B as e,I as t}from"../element-plus/element-plus.ec3bfd4a.js";import{P as s}from"../PrintChart/PrintChart.f2d0444f.js";import"../vue/vue.35a5c883.js";import{u as l,a as o}from"../vue-router/vue-router.62720988.js";import{w as c,f as i,e as n,q as r,b as d,d as u,c as p,x as m}from"../../assets/index.1ca5cbe4.js";import{_ as b}from"../vue-qr/vue-qr.0ca12301.js";import{t as h,e as v,X as f,w as y,W as g,o as _,c as w,a as k,T as j,R as $,K as x,L as A,u as O,P as N,O as P,U as z,$ as S,F as L}from"../@vue/@vue.077a65af.js";import"../@vueuse/@vueuse.57a4e826.js";import"../@element-plus/@element-plus.19eacc1c.js";import"../dayjs/dayjs.7a5f879f.js";import"../@intlify/@intlify.d33e2919.js";import"../lodash-es/lodash-es.e287ec0c.js";import"../@ctrl/@ctrl.17547d95.js";import"../escape-html/escape-html.d572c0fd.js";import"../@popperjs/@popperjs.12a79995.js";import"../normalize-wheel-es/normalize-wheel-es.db30398b.js";import"../chartProcess/chartProcess.bd966a6c.js";import"../dist/html2canvas.1285d1cf.js";import"../jspdf/jspdf.330a9a43.js";import"../@babel/@babel.fd5c2a4f.js";import"../fflate/fflate.f62025b3.js";import"../vue-axios/vue-axios.0d80ef0e.js";import"../decimal.js/decimal.js.77638b52.js";import"../vue-clipboard3/vue-clipboard3.f8057bcc.js";import"../clipboard/clipboard.eec53070.js";import"../vue-i18n/vue-i18n.e0b6e81d.js";import"../vuex/vuex.389a1fed.js";import"../axios/axios.3ae77db0.js";import"../echarts/echarts.cc448593.js";import"../zrender/zrender.a8917a70.js";import"../tslib/tslib.e35f93b8.js";import"../echarts-gl/echarts-gl.4fe9f180.js";import"../claygl/claygl.59c2afb1.js";import"../centrifuge/centrifuge.c0d375ba.js";import"../vue-json-viewer/vue-json-viewer.32907f0d.js";import"../path-browserify/path-browserify.3d3258d8.js";import"../js-binary-schema-parser/js-binary-schema-parser.f718aa23.js";const C={class:"chain"},B={class:"panel-content-chart"},E={class:"panel-content-chart-box"},I={class:"panel-content-chart-box-title"},J={key:0,id:"coincharts",class:"ecolib-charts-item-line",style:{height:"70vh"}},q=k("div",{id:"addresschart",class:"ecolib-charts-item-line"},null,-1),F={class:"panel-table"},H={class:"panel-content-table"},W={key:0},X={class:"panel-content-table-symbol"},G={class:"panel-content-table-symbol"},M=k("span",{class:"panel-content-table-symbol"},"% ",-1),D=k("div",{id:"addchart",class:"ecolib-charts-item-line"},null,-1),K={class:"panel-table"},R={class:"panel-content-table"},T={key:0},U={class:"panel-content-table-symbol"},V=k("span",{class:"panel-content-table-symbol"},"% ",-1),Q={key:3,id:"gaschart",class:"ecolib-charts-item-line"},Y=k("div",{id:"tranchart",class:"ecolib-charts-item-line"},null,-1),Z={class:"panel-table"},aa={class:"panel-content-table"},ea={class:"panel-content-table-page"},ta={key:5,id:"keychart",class:"ecolib-charts-item-line"},sa={key:6,id:"activechart",class:"ecolib-charts-item-line"},la={key:7,id:"transaction",class:"ecolib-charts-item-line"},oa={key:8,id:"storage",class:"ecolib-charts-item-line"};var ca=b({setup(b){const ca=h("axios"),ia=h("isMobile"),na=v(""),ra=l(),da=o(),ua=[1,2,3,4,5,6,7,8,9],pa=v(1),ma=v(1),ba=v("coincharts"),ha=v(""),va=c(),fa=async a=>{const e=await ca({method:"get",url:`eco_chart/get_circulations/${a}`});if(0===e.code){const{change:t}=e.data;na.value=e.data.name;const s=t.time.map((a=>a)),l=t.circulations.map((a=>r(a)));let o={},c=[];if(1===a){const a=[l,t.stake_amount.map((a=>r(a))),t.freeze_amount.map((a=>r(a))),t.nft_balance_supply.map((a=>r(a)))];o={xAxis:s,legend:[d("panel.cirb"),d("panel.circ"),d("panel.cird"),d("ecolib.stay")],series:a};const i=[{name:d("panel.cirb"),key:"circulations"},{name:d("panel.circ"),key:"stake_amount"},{name:d("panel.cird"),key:"freeze_amount"},{name:d("ecolib.stay"),key:"nft_balance_supply"}];c=i.map((a=>({name:a.name,value:r(e.data[a.key])})))}else{const a=[l,t.burning_tokens.map((a=>r(a))),t.combustion.map((a=>r(a)))];o={xAxis:s,legend:[d("panel.cirb"),d("ecolib.dest"),d("ecolib.burn")],series:a};const i=[{name:d("panel.cirb"),key:"circulations"},{name:d("ecolib.dest"),key:"burning_tokens"},{name:d("ecolib.burn"),key:"combustion"}];c=i.map((a=>({name:a.name,value:r(e.data[a.key])})))}ha.value=`${d("ecolib.coinchart")} (${e.data.token_symbol})`,L((()=>{u.handleLineArea("coincharts",ha.value,o,!0),u.coincharts.setOption({legend:{bottom:"5%"},grid:{top:"50%",containLabel:!0},series:{type:"pie",id:"pie",radius:"30%",center:["50%","25%"],data:c,label:{color:va,fontSize:12,fontFamily:"Chakra Petch Light"},tooltip:{trigger:"item",position:"right"},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}})}))}},ya=f({data:[]}),ga=m(),_a=f({data:[]}),wa=f({data:[],page:1,limit:10,total:1}),ka={ecosystem:pa.value,page:1,limit:10,order:"block desc",search:"chart"},ja=async a=>{const e=await ca.post("get_eco_detail_tx",a);0===e.code&&(wa.data=e.data.list,wa.page=e.data.page,wa.limit=e.data.limit,wa.total=e.data.total)},$a=a=>{ka.page=a,ja(ka)};return y((()=>{const a=Object.prototype.hasOwnProperty.call(ra.params,"id"),e=Object.prototype.hasOwnProperty.call(ra.params,"type");if(a&&e){const{id:a,type:e}=ra.params;if(ua.includes(Number(e)))switch(ka.ecosystem=pa.value=Number(a),ma.value=Number(e),Number(e)){case 1:default:ba.value="coincharts",fa(pa.value);break;case 2:ba.value="addresschart",(async a=>{const e=await ca.get(`eco_chart/get_has_token/${a}`);if(0===e.code&&e.data.list.length){const a=e.data.list.length;na.value=e.data.name;const t=JSON.parse(JSON.stringify(ga)).splice(0,a),s=[],l=e.data.list.map(((a,l)=>(a.color=t[l],a.token_symbol=e.data.token_symbol,s.push({name:a.account,value:a.accounted_for}),a)));ya.data=l,ha.value=`${d("ecolib.addresschart")} (%)`,L((()=>{ia?(u.handleEchartPie(s,ha.value,"30%","addresschart",!0),u.addresschart.setOption({legend:{top:30,itemWidth:15,itemHeight:10,itemGap:5,textStyle:{fontSize:10}},series:[{center:["50%","75%"]}]})):u.handleEchartPie(s,ha.value,"40%","addresschart",!0)}))}})(pa.value);break;case 3:ba.value="addchart",(async a=>{const e=await ca.get(`eco_chart/get_tx_account/${a}`);if(0===e.code&&e.data.list.length){na.value=e.data.name;const a=e.data.list.length,t=JSON.parse(JSON.stringify(ga)).splice(0,a),s=[],l=e.data.list.map(((a,l)=>(a.color=t[l],a.token_symbol=e.data.token_symbol,s.push({name:a.account,value:a.accounted_for}),a)));_a.data=l,ha.value=`${d("ecolib.addchart")} (%)`,L((()=>{ia?(u.handleEchartPie(s,ha.value,"30%","addchart",!0),u.addchart.setOption({legend:{top:30,itemWidth:15,itemHeight:10,itemGap:5,textStyle:{fontSize:10}},series:[{center:["50%","75%"]}]})):u.handleEchartPie(s,ha.value,"50%","addchart",!0)}))}})(pa.value);break;case 4:ba.value="gaschart",(async a=>{const e=await ca.get(`eco_chart/get_gas_fee/${a}`);if(0===e.code){na.value=e.data.name;const a=e.data.time;let t=[];if(e.data.basis_gas_amount){const s=e.data.basis_gas_amount;let l=e.data.eco_gas_amount.map(((e,t)=>[p(a[t]),r(e),r(s[t])]));t={legend:[d("ecolib.gasmount"),d("ecolib.amount")],series:[l]}}else{let s=e.data.eco_gas_amount.map(((e,t)=>[p(a[t]),r(e)]));t={legend:[],series:[s]}}ha.value=`${d("ecolib.gaschart")} (${e.data.token_symbol})`,L((()=>{u.handleEchartBarData(t,ha.value,"gaschart",!0)}))}})(pa.value);break;case 5:ba.value="tranchart",ja(ka),(async a=>{const e=await ca.get(`eco_chart/get_tx_amount/${a}`);if(0===e.code){na.value=e.data.name;const a={xAxis:e.data.time.map((a=>p(a))),legend:[],series:[e.data.amount.map((a=>r(a)))]};ha.value=`${d("ecolib.tranchart")} (${e.data.token_symbol})`,L((()=>{u.handleLineArea("tranchart",ha.value,a,!0)}))}})(pa.value);break;case 6:ba.value="keychart",(async a=>{const e=await ca.get(`eco_chart/get_new_key/${a}`);if(0===e.code){na.value=e.data.name;const a={xAxis:e.data.time.map((a=>p(a))),legend:[],series:[e.data.new_key]};ha.value=`${d("ecolib.addnew")}`,L((()=>{u.handleLineArea("keychart",ha.value,a,!0)}))}})(pa.value);break;case 7:ba.value="activechart",(async a=>{const e=await ca.get(`eco_chart/get_active_key/${a}`);if(0===e.code){na.value=e.data.name;const a={xAxis:e.data.time.map((a=>p(a))),legend:[],series:[e.data.active_key]};ha.value=`${d("ecolib.activechart")}`,L((()=>{u.handleLineArea("activechart",ha.value,a,!0)}))}})(pa.value);break;case 8:ba.value="transaction",(async a=>{const e=await ca.get(`eco_chart/get_transaction/${a}`);if(0===e.code){na.value=e.data.name;const a={xAxis:e.data.time.map((a=>p(a))),legend:[],series:[e.data.tx]};ha.value=`${d("ecolib.hashchart")}`,L((()=>{u.handleLineArea("transaction",ha.value,a,!0)}))}})(pa.value);break;case 9:ba.value="storage",(async a=>{const e=await ca.get(`eco_chart/get_storage_capacity/${a}`);if(0===e.code){na.value=e.data.name;const a={xAxis:e.data.time.map((a=>p(a))),legend:[],series:[e.data.storage_capacitys]};ha.value=`${d("ecolib.savechart")} (MB)`,L((()=>{u.handleLineArea("storage",ha.value,a,!0)}))}})(pa.value)}else da.push({name:"NotFound"})}})),(l,o)=>{const c=s,r=g("router-link"),d=a,u=e,p=t;return _(),w("div",C,[k("div",B,[k("div",E,[k("div",I,[k("span",null,j(l.$t("panel.eName"))+"ï¼š",1),k("span",null,j(na.value),1)]),$(c,{id:ba.value,title:ha.value},null,8,["id","title"]),1===ma.value?(_(),w("div",J)):x("v-if",!0),2===ma.value?(_(),w(A,{key:1},[q,k("div",F,[k("div",H,[$(u,{data:O(ya).data,stripe:"",style:{width:"100%"}},{default:N((()=>[$(d,{label:l.$t("address.account"),"show-overflow-tooltip":""},{default:N((a=>["Other"===a.row.account?(_(),w("span",W,j(a.row.account),1)):(_(),P(r,{key:1,to:{name:"AccountAddress",params:{address:a.row.account}}},{default:N((()=>[k("span",{style:z({background:a.row.color}),class:"ecolib-charts-item-mark"},null,4),k("span",null,j(a.row.account),1)])),_:2},1032,["to"]))])),_:1},8,["label"]),$(d,{label:l.$t("account.hold"),"show-overflow-tooltip":""},{default:N((a=>[k("span",null,j(O(i)(a.row.amount)),1),k("span",X,j(a.row.token_symbol),1)])),_:1},8,["label"]),$(d,{label:l.$t("account.cash"),"show-overflow-tooltip":""},{default:N((a=>[k("span",null,j(O(i)(a.row.stake_amount)),1),k("span",G,j(a.row.token_symbol),1)])),_:1},8,["label"]),$(d,{label:l.$t("panel.proportion"),"show-overflow-tooltip":""},{default:N((a=>[k("span",null,j(a.row.accounted_for),1),M])),_:1},8,["label"])])),_:1},8,["data"])])])],64)):x("v-if",!0),3===ma.value?(_(),w(A,{key:2},[D,k("div",K,[k("div",R,[$(u,{data:O(_a).data,stripe:"",style:{width:"100%"}},{default:N((()=>[$(d,{label:l.$t("address.account"),"show-overflow-tooltip":""},{default:N((a=>["Other"===a.row.account?(_(),w("span",T,j(a.row.account),1)):(_(),P(r,{key:1,to:{name:"AccountAddress",params:{address:a.row.account}}},{default:N((()=>[k("span",{style:z({background:a.row.color}),class:"ecolib-charts-item-mark"},null,4),k("span",null,j(a.row.account),1)])),_:2},1032,["to"]))])),_:1},8,["label"]),$(d,{label:l.$t("ecolib.deal"),"show-overflow-tooltip":""},{default:N((a=>[k("span",null,j(O(i)(a.row.amount)),1),k("span",U,j(a.row.token_symbol),1)])),_:1},8,["label"]),$(d,{label:l.$t("panel.proportion"),"show-overflow-tooltip":""},{default:N((a=>[k("span",null,j(a.row.accounted_for),1),V])),_:1},8,["label"])])),_:1},8,["data"])])])],64)):x("v-if",!0),4===ma.value?(_(),w("div",Q)):x("v-if",!0),5===ma.value?(_(),w(A,{key:4},[Y,k("div",Z,[k("div",aa,[$(u,{data:O(wa).data,stripe:"",style:{width:"100%"}},{default:N((()=>[$(d,{label:l.$t("account.hash"),"show-overflow-tooltip":""},{default:N((a=>[a.row.hash?(_(),P(r,{key:0,to:{name:"HashValue",params:{value:a.row.hash}}},{default:N((()=>[S(j(a.row.hash),1)])),_:2},1032,["to"])):x("v-if",!0)])),_:1},8,["label"]),$(d,{label:l.$t("panel.block")},{default:N((a=>[a.row.block_id?(_(),P(r,{key:0,to:{name:"BlockId",params:{id:a.row.block_id}}},{default:N((()=>[k("span",null,j(a.row.block_id),1)])),_:2},1032,["to"])):x("v-if",!0)])),_:1},8,["label"]),$(d,{label:l.$t("account.time")},{default:N((a=>[k("span",null,j(O(n)(a.row.time)),1)])),_:1},8,["label"]),$(d,{label:l.$t("account.conact"),prop:"contract"},null,8,["label"]),$(d,{label:l.$t("account.send"),"show-overflow-tooltip":""},{default:N((a=>[a.row.address?(_(),P(r,{key:0,to:{name:"AccountAddress",params:{address:a.row.address}}},{default:N((()=>[k("span",null,j(a.row.address),1)])),_:2},1032,["to"])):x("v-if",!0)])),_:1},8,["label"])])),_:1},8,["data"])])]),k("div",ea,[$(p,{small:"",background:"","hide-on-single-page":"",layout:"prev, pager, next","pager-count":O(ia)?5:11,"current-page":Number(O(wa).page),"page-size":Number(O(wa).limit),total:Number(O(wa).total),onCurrentChange:$a},null,8,["pager-count","current-page","page-size","total"])])],64)):x("v-if",!0),6===ma.value?(_(),w("div",ta)):x("v-if",!0),7===ma.value?(_(),w("div",sa)):x("v-if",!0),8===ma.value?(_(),w("div",la)):x("v-if",!0),9===ma.value?(_(),w("div",oa)):x("v-if",!0)])])])}}},[["__file","C:/gitrepo/lib.venas.io/IBAX/scan.ibax.io/src/pages/ecolibs/ecolibIdChart.vue"]]);export{ca as default};
