import{A as a,B as e,I as t}from"../element-plus/element-plus.ec3bfd4a.js";import{P as s}from"../PrintChart/PrintChart.0091ad28.js";import"../vue/vue.35a5c883.js";import{u as l,a as o}from"../vue-router/vue-router.62720988.js";import{x as c,e as i,k as n,r,b as d,d as u,c as p,a as m,y as h}from"../../assets/index.d2fb5fd0.js";import{_ as b}from"../vue-qr/vue-qr.0ca12301.js";import{t as v,e as f,X as g,w as y,W as _,o as w,c as k,a as j,T as $,R as x,K as A,L as O,u as C,P,O as N,U as z,$ as L,F as S}from"../@vue/@vue.077a65af.js";import"../@vueuse/@vueuse.57a4e826.js";import"../@element-plus/@element-plus.19eacc1c.js";import"../dayjs/dayjs.7a5f879f.js";import"../@intlify/@intlify.d33e2919.js";import"../lodash-es/lodash-es.e287ec0c.js";import"../@ctrl/@ctrl.17547d95.js";import"../escape-html/escape-html.d572c0fd.js";import"../@popperjs/@popperjs.12a79995.js";import"../normalize-wheel-es/normalize-wheel-es.db30398b.js";import"../chartProcess/chartProcess.60150e98.js";import"../dist/html2canvas.1285d1cf.js";import"../jspdf/jspdf.330a9a43.js";import"../@babel/@babel.fd5c2a4f.js";import"../fflate/fflate.f62025b3.js";import"../vue-axios/vue-axios.0d80ef0e.js";import"../decimal.js/decimal.js.77638b52.js";import"../vue-clipboard3/vue-clipboard3.f8057bcc.js";import"../clipboard/clipboard.eec53070.js";import"../vue-i18n/vue-i18n.e0b6e81d.js";import"../vuex/vuex.389a1fed.js";import"../axios/axios.3ae77db0.js";import"../echarts/echarts.acca1833.js";import"../zrender/zrender.e63004cf.js";import"../tslib/tslib.e35f93b8.js";import"../echarts-gl/echarts-gl.c19cb34c.js";import"../claygl/claygl.59c2afb1.js";import"../centrifuge/centrifuge.c0d375ba.js";import"../vue-json-viewer/vue-json-viewer.32907f0d.js";import"../path-browserify/path-browserify.3d3258d8.js";import"../js-binary-schema-parser/js-binary-schema-parser.f718aa23.js";const F={class:"chain"},B={class:"panel-content-chart"},E={class:"panel-content-chart-box"},I={class:"panel-content-chart-box-title"},J={key:0,id:"coincharts",class:"ecolib-charts-item-line",style:{height:"70vh"}},X=j("div",{id:"addresschart",class:"ecolib-charts-item-line"},null,-1),H={class:"panel-table"},W={class:"panel-content-table"},q={key:0},G={class:"panel-content-table-symbol"},M={class:"panel-content-table-symbol"},D=j("span",{class:"panel-content-table-symbol"},"% ",-1),K=j("div",{id:"addchart",class:"ecolib-charts-item-line"},null,-1),R={class:"panel-table"},T={class:"panel-content-table"},U={key:0},V={class:"panel-content-table-symbol"},Q=j("span",{class:"panel-content-table-symbol"},"% ",-1),Y={key:3,id:"gaschart",class:"ecolib-charts-item-line"},Z=j("div",{id:"tranchart",class:"ecolib-charts-item-line"},null,-1),aa={class:"panel-table"},ea={class:"panel-content-table"},ta={class:"panel-content-table-page"},sa={key:5,id:"keychart",class:"ecolib-charts-item-line"},la={key:6,id:"activechart",class:"ecolib-charts-item-line"},oa={key:7,id:"transaction",class:"ecolib-charts-item-line"},ca={key:8,id:"storage",class:"ecolib-charts-item-line"},ia={key:9,id:"gasFeeChart",class:"ecolib-charts-item-line"};var na=b({setup(b){const na=v("axios"),ra=v("isMobile"),da=f(""),ua=l(),pa=o(),ma=[1,2,3,4,5,6,7,8,9,10],ha=f(1),ba=f(1),va=f("coincharts"),fa=f(""),ga=c(),ya=async a=>{const e=await na({method:"get",url:`eco_chart/get_circulations/${a}`});if(0===e.code){const{change:t}=e.data;da.value=e.data.name;const s=t.time.map((a=>a)),l=t.circulations.map((a=>r(a)));let o={},c=[];if(1===a){const a=[l,t.stake_amount.map((a=>r(a))),t.freeze_amount.map((a=>r(a))),t.nft_balance_supply.map((a=>r(a)))];o={xAxis:s,legend:[d("panel.cirb"),d("panel.circ"),d("panel.cird"),d("ecolib.stay")],series:a};const i=[{name:d("panel.cirb"),key:"circulations"},{name:d("panel.circ"),key:"stake_amount"},{name:d("panel.cird"),key:"freeze_amount"},{name:d("ecolib.stay"),key:"nft_balance_supply"}];c=i.map((a=>({name:a.name,value:r(e.data[a.key])})))}else{const a=[l,t.burning_tokens.map((a=>r(a))),t.combustion.map((a=>r(a)))];o={xAxis:s,legend:[d("panel.cirb"),d("ecolib.dest"),d("ecolib.burn")],series:a};const i=[{name:d("panel.cirb"),key:"circulations"},{name:d("ecolib.dest"),key:"burning_tokens"},{name:d("ecolib.burn"),key:"combustion"}];c=i.map((a=>({name:a.name,value:r(e.data[a.key])})))}fa.value=`${d("ecolib.coinchart")} (${e.data.token_symbol})`,S((()=>{u.handleLineArea("coincharts",fa.value,o,!0),u.coincharts.setOption({legend:{bottom:"5%"},grid:{top:"50%",containLabel:!0},series:{type:"pie",id:"pie",radius:"30%",center:["50%","25%"],data:c,label:{color:ga,fontSize:12,fontFamily:"Chakra Petch Light"},tooltip:{trigger:"item",position:"right"},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}})}))}},_a=g({data:[]}),wa=h(),ka=g({data:[]}),ja=g({data:[],page:1,limit:10,total:1}),$a={ecosystem:ha.value,page:1,limit:10,order:"block desc",search:"chart"},xa=async a=>{const e=await na.post("get_eco_detail_tx",a);0===e.code&&(ja.data=e.data.list,ja.page=e.data.page,ja.limit=e.data.limit,ja.total=e.data.total)},Aa=a=>{$a.page=a,xa($a)};return y((()=>{const a=Object.prototype.hasOwnProperty.call(ua.params,"id"),e=Object.prototype.hasOwnProperty.call(ua.params,"type");if(a&&e){const{id:a,type:e}=ua.params;if(ma.includes(Number(e)))switch($a.ecosystem=ha.value=Number(a),ba.value=Number(e),Number(e)){case 1:default:va.value="coincharts",ya(ha.value);break;case 2:va.value="addresschart",(async a=>{const e=await na.get(`eco_chart/get_has_token/${a}`);if(0===e.code&&e.data.list.length){const a=e.data.list.length;da.value=e.data.name;const t=JSON.parse(JSON.stringify(wa)).splice(0,a),s=[],l=e.data.list.map(((a,l)=>(a.color=t[l],a.token_symbol=e.data.token_symbol,s.push({name:a.account,value:a.accounted_for}),a)));_a.data=l,fa.value=`${d("ecolib.addresschart")} (%)`,S((()=>{ra?(u.handleEchartPie(s,fa.value,"30%","addresschart",!0),u.addresschart.setOption({legend:{top:30,itemWidth:15,itemHeight:10,itemGap:5,textStyle:{fontSize:10}},series:[{center:["50%","75%"]}]})):u.handleEchartPie(s,fa.value,"40%","addresschart",!0)}))}})(ha.value);break;case 3:va.value="addchart",(async a=>{const e=await na.get(`eco_chart/get_tx_account/${a}`);if(0===e.code&&e.data.list.length){da.value=e.data.name;const a=e.data.list.length,t=JSON.parse(JSON.stringify(wa)).splice(0,a),s=[],l=e.data.list.map(((a,l)=>(a.color=t[l],a.token_symbol=e.data.token_symbol,s.push({name:a.account,value:a.accounted_for}),a)));ka.data=l,fa.value=`${d("ecolib.addchart")} (%)`,S((()=>{ra?(u.handleEchartPie(s,fa.value,"30%","addchart",!0),u.addchart.setOption({legend:{top:30,itemWidth:15,itemHeight:10,itemGap:5,textStyle:{fontSize:10}},series:[{center:["50%","75%"]}]})):u.handleEchartPie(s,fa.value,"50%","addchart",!0)}))}})(ha.value);break;case 4:va.value="gaschart",(async a=>{const e=await na.get(`eco_chart/get_gas_fee/${a}`);if(0===e.code){da.value=e.data.name;const a=e.data.time;let t=[];if(e.data.basis_gas_amount){const s=e.data.basis_gas_amount;let l=e.data.eco_gas_amount.map(((e,t)=>[p(a[t]),r(e),r(s[t])]));t={legend:[d("ecolib.gasmount"),d("ecolib.amount")],series:[l]}}else{let s=e.data.eco_gas_amount.map(((e,t)=>[p(a[t]),r(e)]));t={legend:[],series:[s]}}fa.value=`${d("ecolib.gaschart")} (${e.data.token_symbol})`,S((()=>{u.handleEchartBarData(t,fa.value,"gaschart",!0)}))}})(ha.value);break;case 5:va.value="tranchart",xa($a),(async a=>{const e=await na.get(`eco_chart/get_tx_amount/${a}`);if(0===e.code){da.value=e.data.name;const a={xAxis:e.data.time.map((a=>p(a))),legend:[],series:[e.data.amount.map((a=>r(a)))]};fa.value=`${d("ecolib.tranchart")} (${e.data.token_symbol})`,S((()=>{u.handleLineArea("tranchart",fa.value,a,!0)}))}})(ha.value);break;case 6:va.value="keychart",(async a=>{const e=await na.get(`eco_chart/get_new_key/${a}`);if(0===e.code){da.value=e.data.name;const a={xAxis:e.data.time.map((a=>p(a))),legend:[],series:[e.data.new_key]};fa.value=`${d("ecolib.addnew")}`,S((()=>{u.handleLineArea("keychart",fa.value,a,!0)}))}})(ha.value);break;case 7:va.value="activechart",(async a=>{const e=await na.get(`eco_chart/get_active_key/${a}`);if(0===e.code){da.value=e.data.name;const a={xAxis:e.data.time.map((a=>p(a))),legend:[],series:[e.data.active_key]};fa.value=`${d("ecolib.activechart")}`,S((()=>{u.handleLineArea("activechart",fa.value,a,!0)}))}})(ha.value);break;case 8:va.value="transaction",(async a=>{const e=await na.get(`eco_chart/get_transaction/${a}`);if(0===e.code){da.value=e.data.name;const a={xAxis:e.data.time.map((a=>p(a))),legend:[],series:[e.data.tx]};fa.value=`${d("ecolib.hashchart")}`,S((()=>{u.handleLineArea("transaction",fa.value,a,!0)}))}})(ha.value);break;case 9:va.value="storage",(async a=>{const e=await na.get(`eco_chart/get_storage_capacity/${a}`);if(0===e.code){da.value=e.data.name;const a={xAxis:e.data.time.map((a=>p(a))),legend:[],series:[e.data.storage_capacitys]};fa.value=`${d("ecolib.savechart")} (MB)`,S((()=>{u.handleLineArea("storage",fa.value,a,!0)}))}})(ha.value);break;case 10:va.value="gasFeeChart",(async a=>{const e=await na.get(`/eco_chart/get_gas_combustion_pie/${a}`),t=await na.get(`/eco_chart/get_gas_combustion_line/${a}`);if(0===e.code){da.value=e.data.name,fa.value=`${d("chart.gasfee")}`;const a=e.data.token_symbol;let s=[{name:d("chart.get"),key:"gas_fee"},{name:d("chart.burn"),key:"combustion"}].map((a=>({name:a.name,value:r(e.data[a.key])})));const l=[t.data.gas_fee.map((a=>r(a))),t.data.combustion.map((a=>r(a)))],o={xAxis:t.data.time,legend:[d("chart.get"),d("chart.burn")],series:l};S((()=>{u.handleLineArea("gasFeeChart",fa.value,o,!0),u.gasFeeChart.setOption({legend:{bottom:"5%"},grid:{top:"50%",containLabel:!0},series:{type:"pie",id:"pie",radius:"30%",center:["50%","25%"],data:s,label:{color:ga,fontSize:12,fontFamily:"Chakra Petch Light"},tooltip:{trigger:"item",position:"right",valueFormatter:function(e){return`${m(e)} ${a}`}},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}})}))}})(ha.value)}else pa.push({name:"NotFound"})}})),(l,o)=>{const c=s,r=_("router-link"),d=a,u=e,p=t;return w(),k("div",F,[j("div",B,[j("div",E,[j("div",I,[j("span",null,$(l.$t("panel.eName"))+"：",1),j("span",null,$(da.value),1)]),x(c,{id:va.value,title:fa.value},null,8,["id","title"]),1===ba.value?(w(),k("div",J)):A("v-if",!0),2===ba.value?(w(),k(O,{key:1},[X,j("div",H,[j("div",W,[x(u,{data:C(_a).data,stripe:"",style:{width:"100%"}},{default:P((()=>[x(d,{label:l.$t("address.account"),"show-overflow-tooltip":""},{default:P((a=>["Other"===a.row.account?(w(),k("span",q,$(a.row.account),1)):(w(),N(r,{key:1,to:{name:"AccountAddress",params:{address:a.row.account}}},{default:P((()=>[j("span",{style:z({background:a.row.color}),class:"ecolib-charts-item-mark"},null,4),j("span",null,$(a.row.account),1)])),_:2},1032,["to"]))])),_:1},8,["label"]),x(d,{label:l.$t("account.hold"),"show-overflow-tooltip":""},{default:P((a=>[j("span",null,$(C(i)(a.row.amount)),1),j("span",G,$(a.row.token_symbol),1)])),_:1},8,["label"]),x(d,{label:l.$t("account.cash"),"show-overflow-tooltip":""},{default:P((a=>[j("span",null,$(C(i)(a.row.stake_amount)),1),j("span",M,$(a.row.token_symbol),1)])),_:1},8,["label"]),x(d,{label:l.$t("panel.proportion"),"show-overflow-tooltip":""},{default:P((a=>[j("span",null,$(a.row.accounted_for),1),D])),_:1},8,["label"])])),_:1},8,["data"])])])],64)):A("v-if",!0),3===ba.value?(w(),k(O,{key:2},[K,j("div",R,[j("div",T,[x(u,{data:C(ka).data,stripe:"",style:{width:"100%"}},{default:P((()=>[x(d,{label:l.$t("address.account"),"show-overflow-tooltip":""},{default:P((a=>["Other"===a.row.account?(w(),k("span",U,$(a.row.account),1)):(w(),N(r,{key:1,to:{name:"AccountAddress",params:{address:a.row.account}}},{default:P((()=>[j("span",{style:z({background:a.row.color}),class:"ecolib-charts-item-mark"},null,4),j("span",null,$(a.row.account),1)])),_:2},1032,["to"]))])),_:1},8,["label"]),x(d,{label:l.$t("ecolib.deal"),"show-overflow-tooltip":""},{default:P((a=>[j("span",null,$(C(i)(a.row.amount)),1),j("span",V,$(a.row.token_symbol),1)])),_:1},8,["label"]),x(d,{label:l.$t("panel.proportion"),"show-overflow-tooltip":""},{default:P((a=>[j("span",null,$(a.row.accounted_for),1),Q])),_:1},8,["label"])])),_:1},8,["data"])])])],64)):A("v-if",!0),4===ba.value?(w(),k("div",Y)):A("v-if",!0),5===ba.value?(w(),k(O,{key:4},[Z,j("div",aa,[j("div",ea,[x(u,{data:C(ja).data,stripe:"",style:{width:"100%"}},{default:P((()=>[x(d,{label:l.$t("account.hash"),"show-overflow-tooltip":""},{default:P((a=>[a.row.hash?(w(),N(r,{key:0,to:{name:"HashValue",params:{value:a.row.hash}}},{default:P((()=>[L($(a.row.hash),1)])),_:2},1032,["to"])):A("v-if",!0)])),_:1},8,["label"]),x(d,{label:l.$t("panel.block")},{default:P((a=>[a.row.block_id?(w(),N(r,{key:0,to:{name:"BlockId",params:{id:a.row.block_id}}},{default:P((()=>[j("span",null,$(a.row.block_id),1)])),_:2},1032,["to"])):A("v-if",!0)])),_:1},8,["label"]),x(d,{label:l.$t("account.time")},{default:P((a=>[j("span",null,$(C(n)(a.row.time)),1)])),_:1},8,["label"]),x(d,{label:l.$t("account.conact"),prop:"contract"},null,8,["label"]),x(d,{label:l.$t("account.send"),"show-overflow-tooltip":""},{default:P((a=>[a.row.address?(w(),N(r,{key:0,to:{name:"AccountAddress",params:{address:a.row.address}}},{default:P((()=>[j("span",null,$(a.row.address),1)])),_:2},1032,["to"])):A("v-if",!0)])),_:1},8,["label"])])),_:1},8,["data"])])]),j("div",ta,[x(p,{small:"",background:"","hide-on-single-page":"",layout:"prev, pager, next","pager-count":C(ra)?5:11,"current-page":Number(C(ja).page),"page-size":Number(C(ja).limit),total:Number(C(ja).total),onCurrentChange:Aa},null,8,["pager-count","current-page","page-size","total"])])],64)):A("v-if",!0),6===ba.value?(w(),k("div",sa)):A("v-if",!0),7===ba.value?(w(),k("div",la)):A("v-if",!0),8===ba.value?(w(),k("div",oa)):A("v-if",!0),9===ba.value?(w(),k("div",ca)):A("v-if",!0),10===ba.value?(w(),k("div",ia)):A("v-if",!0)])])])}}},[["__file","C:/gitrepo/lib.venas.io/IBAX/scan.ibax.io/src/pages/ecolibs/ecolibIdChart.vue"]]);export{na as default};
