import{M as a,J as e,K as t,A as s,B as l,I as r}from"../element-plus/element-plus.ec3bfd4a.js";import{P as n}from"../PrintChart/PrintChart.f2d0444f.js";import"../vue/vue.35a5c883.js";import{D as i,b as o,d as c,a as p,f as d,E as m,F as u}from"../../assets/index.1ca5cbe4.js";import{_ as v}from"../vue-qr/vue-qr.0ca12301.js";import{e as h,t as b,X as f,o as j,c as g,a as _,u as y,T as $,R as x,K as w,P as T,F as C,L as V,a2 as z}from"../@vue/@vue.077a65af.js";import"../@vueuse/@vueuse.57a4e826.js";import"../@element-plus/@element-plus.19eacc1c.js";import"../dayjs/dayjs.7a5f879f.js";import"../@intlify/@intlify.d33e2919.js";import"../lodash-es/lodash-es.e287ec0c.js";import"../@ctrl/@ctrl.17547d95.js";import"../escape-html/escape-html.d572c0fd.js";import"../@popperjs/@popperjs.12a79995.js";import"../normalize-wheel-es/normalize-wheel-es.db30398b.js";import"../chartProcess/chartProcess.bd966a6c.js";import"../dist/html2canvas.1285d1cf.js";import"../jspdf/jspdf.330a9a43.js";import"../@babel/@babel.fd5c2a4f.js";import"../fflate/fflate.f62025b3.js";import"../vue-axios/vue-axios.0d80ef0e.js";import"../decimal.js/decimal.js.77638b52.js";import"../vue-clipboard3/vue-clipboard3.f8057bcc.js";import"../clipboard/clipboard.eec53070.js";import"../vue-i18n/vue-i18n.e0b6e81d.js";import"../vuex/vuex.389a1fed.js";import"../axios/axios.3ae77db0.js";import"../vue-router/vue-router.62720988.js";import"../echarts/echarts.cc448593.js";import"../zrender/zrender.a8917a70.js";import"../tslib/tslib.e35f93b8.js";import"../echarts-gl/echarts-gl.4fe9f180.js";import"../claygl/claygl.59c2afb1.js";import"../centrifuge/centrifuge.c0d375ba.js";import"../vue-json-viewer/vue-json-viewer.32907f0d.js";import"../path-browserify/path-browserify.3d3258d8.js";import"../js-binary-schema-parser/js-binary-schema-parser.f718aa23.js";const A={class:"chain"},P={class:"panel-content-chart"},k={class:"panel-content-chart-box"},M={class:"panel-date"},I={key:0,class:"panel-date-box"},N={class:"demonstration"},q={class:"panel-content-select"},B=_("div",{id:"activeChart",class:"ecolib-charts-item-line"},null,-1),F={class:"panel-table"},K={class:"panel-content-table"},L=_("span",{class:"panel-content-table-symbol"},"%",-1),S={class:"chain-account-item-symbol"},U={class:"panel-content-table-page"};var X=v({setup(v){const X=h(""),D=b("isMobile"),E=h("activeChart"),J=b("axios"),O=h("all"),R={search:"all"},Z={page:1,limit:10,startTime:"",endTime:""},G=async a=>{const e=await J.post("get_account_active_chart",a);if(0===e.code){Z.startTime=e.data.time[0],Z.endTime=e.data.time[e.data.time.length-1],Q(Z);const a=e.data.time.map((a=>1e3*a)),t=e.data.info.map(((e,t)=>(e.value=e.active_account,[a[t],e.active_account,e]))),s={legend:[o("chart.activeAddress")],series:[t]};X.value=`${o("chart.active")}`,C((()=>{c.handleLineToolArea("activeChart",X.value,s,!0);const a=c.activeChart;a.setOption({tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},formatter:a=>{const{data:e}=a[0],t=e[2];return`<div>\n          <div>\n          <span>${o("chart.activeAddress")}：</span>\n          <span>${p(t.active_account)}</span>\n          </div>\n          <div>\n          <span>${o("chart.totalAddress")}：</span>\n          <span>${p(t.total_key)}</span>\n          </div>\n          <div>\n          <span>${o("panel.proportion")}：</span>\n          <span>${t.ratio} %</span>\n          </div>\n          <div>\n          <span>${o("chart.ratio")}：</span>\n          <span>${t.relative_ratio} %</span>\n          </div>\n          <div>\n          <span>${o("chart.num")}：</span>\n          <span>${p(t.tx_number)}</span>\n          </div>\n          <div>\n          <span>${o("chart.amount")}：</span>\n          <span>${d(t.tx_amount)} ${o("page.symbol")}</span>\n          </div>\n          </div>`}}}),a.on("datazoom",(()=>{let e=a.getModel().option.dataZoom[0],t=e.startValue,s=e.endValue;Z.startTime=parseInt(t/1e3),Z.endTime=parseInt(s/1e3),Z.page=1,Q(Z)}))}))}};G(R);const H=f({data:[],page:1,limit:10,total:1}),Q=async a=>{const e=await J.post("get_account_active_list",a);0===e.code&&(H.data=e.data.list,H.page=e.data.page,H.limit=e.data.limit,H.total=e.data.total)},W=a=>{Z.page=a,Q(Z)},Y=h(""),aa=i(),ea=()=>"panel-date-cell",ta=a=>{R.search="",R.startTime=m(a[0]),R.endTime=m(a[1]),G(R)},sa=[{value:"all",label:o("chart.day")},{value:"1_month",label:o("chart.oneMonth")},{value:"3_month",label:o("chart.threeMonth")},{value:"1_year",label:o("chart.year")}],la=a=>{Y.value="",R.search=a,R.startTime=0,R.endTime=0,G(R)};return(i,o)=>{const c=a,m=e,v=t,h=n,b=s,f=l,C=r;return j(),g("div",A,[_("div",P,[_("div",k,[_("div",M,[y(D)?w("v-if",!0):(j(),g("div",I,[_("span",N,$(i.$t("chart.dateSelect"))+"：",1),x(c,{modelValue:Y.value,"onUpdate:modelValue":o[0]||(o[0]=a=>Y.value=a),type:"datetimerange","unlink-panels":"","time-arrow-control":"","range-separator":i.$t("chart.to"),"start-placeholder":i.$t("chart.startTime"),"end-placeholder":i.$t("chart.endTime"),shortcuts:y(aa),editable:!1,"popper-class":"panel-date-popper","cell-class-name":ea,onChange:ta},null,8,["modelValue","range-separator","start-placeholder","end-placeholder","shortcuts"])])),_("div",q,[x(v,{modelValue:O.value,"onUpdate:modelValue":o[1]||(o[1]=a=>O.value=a),placeholder:"Select",onChange:la},{default:T((()=>[(j(),g(V,null,z(sa,(a=>x(m,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])]),x(h,{id:E.value,title:X.value,class:"panel-date-print"},null,8,["id","title"])]),B,_("div",F,[_("div",K,[x(f,{data:y(H).data,stripe:"",style:{width:"100%"}},{default:T((()=>[x(b,{label:i.$t("chart.date")},{default:T((a=>[_("span",null,$(y(u)(a.row.time)),1)])),_:1},8,["label"]),x(b,{label:i.$t("chart.activeAddress")},{default:T((a=>[_("span",null,$(y(p)(a.row.active_account)),1)])),_:1},8,["label"]),x(b,{label:i.$t("chart.ratio")},{default:T((a=>[_("span",null,$(a.row.relative_ratio),1),L])),_:1},8,["label"]),x(b,{label:i.$t("chart.num")},{default:T((a=>[_("span",null,$(y(p)(a.row.tx_number)),1)])),_:1},8,["label"]),x(b,{label:i.$t("chart.amount")},{default:T((a=>[_("span",null,[_("span",null,$(y(d)(a.row.tx_amount)),1),_("span",S,$(i.$t("page.symbol")),1)])])),_:1},8,["label"])])),_:1},8,["data"])])]),_("div",U,[x(C,{small:"",background:"","hide-on-single-page":"",layout:"prev, pager, next","pager-count":y(D)?5:11,"current-page":Number(y(H).page),"page-size":Number(y(H).limit),total:Number(y(H).total),onCurrentChange:W},null,8,["pager-count","current-page","page-size","total"])])])])])}}},[["__file","C:/gitrepo/lib.venas.io/IBAX/scan.ibax.io/src/pages/chart/activeChart.vue"]]);export{X as default};
