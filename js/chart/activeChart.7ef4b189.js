import{L as a,I as e,J as t,y as s,A as l,H as r}from"../element-plus/element-plus.bab642f5.js";import{P as n}from"../PrintChart/PrintChart.7fc37b68.js";import"../vue/vue.35a5c883.js";import{C as i,b as o,d as c,a as p,f as d,D as m,E as u}from"../../assets/index.32f89fa2.js";import{_ as v}from"../vue-qr/vue-qr.0ca12301.js";import{e as h,t as b,X as f,o as j,c as g,a as _,u as y,T as $,R as x,K as w,P as C,F as T,L as V,a2 as z}from"../@vue/@vue.077a65af.js";import"../@vueuse/@vueuse.57a4e826.js";import"../@element-plus/@element-plus.19eacc1c.js";import"../dayjs/dayjs.7a5f879f.js";import"../@intlify/@intlify.d33e2919.js";import"../lodash-es/lodash-es.e287ec0c.js";import"../@ctrl/@ctrl.17547d95.js";import"../escape-html/escape-html.d572c0fd.js";import"../@popperjs/@popperjs.12a79995.js";import"../normalize-wheel-es/normalize-wheel-es.db30398b.js";import"../chartProcess/chartProcess.183be46e.js";import"../dist/html2canvas.1285d1cf.js";import"../jspdf/jspdf.330a9a43.js";import"../@babel/@babel.fd5c2a4f.js";import"../fflate/fflate.f62025b3.js";import"../vue-axios/vue-axios.0d80ef0e.js";import"../decimal.js/decimal.js.77638b52.js";import"../vue-clipboard3/vue-clipboard3.f8057bcc.js";import"../clipboard/clipboard.eec53070.js";import"../vue-i18n/vue-i18n.e0b6e81d.js";import"../vuex/vuex.389a1fed.js";import"../axios/axios.3ae77db0.js";import"../vue-router/vue-router.62720988.js";import"../echarts/echarts.cc448593.js";import"../zrender/zrender.a8917a70.js";import"../tslib/tslib.e35f93b8.js";import"../echarts-gl/echarts-gl.4fe9f180.js";import"../claygl/claygl.59c2afb1.js";import"../centrifuge/centrifuge.c0d375ba.js";import"../vue-json-viewer/vue-json-viewer.32907f0d.js";import"../path-browserify/path-browserify.3d3258d8.js";import"../js-binary-schema-parser/js-binary-schema-parser.f718aa23.js";const A={class:"chain"},P={class:"panel-content-chart"},k={class:"panel-content-chart-box"},I={class:"panel-date"},M={key:0,class:"panel-date-box"},L={class:"demonstration"},N={class:"panel-content-select"},q=_("div",{id:"activeChart",class:"ecolib-charts-item-line"},null,-1),S={class:"panel-table"},U={class:"panel-content-table"},X=_("span",{class:"panel-content-table-symbol"},"%",-1),B={class:"chain-account-item-symbol"},D={class:"panel-content-table-page"};var E=v({setup(v){const E=h(""),F=b("isMobile"),H=h("activeChart"),J=b("axios"),K=h("all"),O={search:"all"},R={page:1,limit:10,startTime:"",endTime:""},Z=async a=>{const e=await J.post("get_account_active_chart",a);if(0===e.code){R.startTime=e.data.time[0],R.endTime=e.data.time[e.data.time.length-1],Q(R);const a=e.data.time.map((a=>1e3*a)),t=e.data.info.map(((e,t)=>(e.value=e.active_account,[a[t],e.active_account,e]))),s={legend:[o("chart.activeAddress")],series:[t]};E.value=`${o("chart.active")}`,T((()=>{c.handleLineToolArea("activeChart",E.value,s,!0);const a=c.activeChart;a.setOption({tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},formatter:a=>{const{data:e}=a[0],t=e[2];return`<div>\n          <div>\n          <span>${o("chart.activeAddress")}：</span>\n          <span>${p(t.active_account)}</span>\n          </div>\n          <div>\n          <span>${o("chart.totalAddress")}：</span>\n          <span>${p(t.total_key)}</span>\n          </div>\n          <div>\n          <span>${o("panel.proportion")}：</span>\n          <span>${t.ratio} %</span>\n          </div>\n          <div>\n          <span>${o("chart.ratio")}：</span>\n          <span>${t.relative_ratio} %</span>\n          </div>\n          <div>\n          <span>${o("chart.num")}：</span>\n          <span>${p(t.tx_number)}</span>\n          </div>\n          <div>\n          <span>${o("chart.amount")}：</span>\n          <span>${d(t.tx_amount)} ${o("page.symbol")}</span>\n          </div>\n          </div>`}}}),a.on("datazoom",(()=>{let e=a.getModel().option.dataZoom[0],t=e.startValue,s=e.endValue;R.startTime=parseInt(t/1e3),R.endTime=parseInt(s/1e3),R.page=1,Q(R)}))}))}};Z(O);const G=f({data:[],page:1,limit:10,total:1}),Q=async a=>{const e=await J.post("get_account_active_list",a);0===e.code&&(G.data=e.data.list,G.page=e.data.page,G.limit=e.data.limit,G.total=e.data.total)},W=a=>{R.page=a,Q(R)},Y=h(""),aa=i(),ea=()=>"panel-date-cell",ta=a=>{O.search="",O.startTime=m(a[0]),O.endTime=m(a[1]),Z(O)},sa=[{value:"all",label:o("chart.day")},{value:"1_month",label:o("chart.oneMonth")},{value:"3_month",label:o("chart.threeMonth")},{value:"1_year",label:o("chart.year")}],la=a=>{Y.value="",O.search=a,O.startTime=0,O.endTime=0,Z(O)};return(i,o)=>{const c=a,m=e,v=t,h=n,b=s,f=l,T=r;return j(),g("div",A,[_("div",P,[_("div",k,[_("div",I,[y(F)?w("v-if",!0):(j(),g("div",M,[_("span",L,$(i.$t("chart.dateSelect"))+"：",1),x(c,{modelValue:Y.value,"onUpdate:modelValue":o[0]||(o[0]=a=>Y.value=a),type:"datetimerange","unlink-panels":"","time-arrow-control":"","range-separator":i.$t("chart.to"),"start-placeholder":i.$t("chart.startTime"),"end-placeholder":i.$t("chart.endTime"),shortcuts:y(aa),editable:!1,"popper-class":"panel-date-popper","cell-class-name":ea,onChange:ta},null,8,["modelValue","range-separator","start-placeholder","end-placeholder","shortcuts"])])),_("div",N,[x(v,{modelValue:K.value,"onUpdate:modelValue":o[1]||(o[1]=a=>K.value=a),placeholder:"Select",onChange:la},{default:C((()=>[(j(),g(V,null,z(sa,(a=>x(m,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])]),x(h,{id:H.value,title:E.value,class:"panel-date-print"},null,8,["id","title"])]),q,_("div",S,[_("div",U,[x(f,{data:y(G).data,stripe:"",style:{width:"100%"}},{default:C((()=>[x(b,{label:i.$t("chart.date")},{default:C((a=>[_("span",null,$(y(u)(a.row.time)),1)])),_:1},8,["label"]),x(b,{label:i.$t("chart.activeAddress")},{default:C((a=>[_("span",null,$(y(p)(a.row.active_account)),1)])),_:1},8,["label"]),x(b,{label:i.$t("chart.ratio")},{default:C((a=>[_("span",null,$(a.row.relative_ratio),1),X])),_:1},8,["label"]),x(b,{label:i.$t("chart.num")},{default:C((a=>[_("span",null,$(y(p)(a.row.tx_number)),1)])),_:1},8,["label"]),x(b,{label:i.$t("chart.amount")},{default:C((a=>[_("span",null,[_("span",null,$(y(d)(a.row.tx_amount)),1),_("span",B,$(i.$t("page.symbol")),1)])])),_:1},8,["label"])])),_:1},8,["data"])])]),_("div",D,[x(T,{small:"",background:"","hide-on-single-page":"",layout:"prev, pager, next","pager-count":y(F)?5:11,"current-page":Number(y(G).page),"page-size":Number(y(G).limit),total:Number(y(G).total),onCurrentChange:W},null,8,["pager-count","current-page","page-size","total"])])])])])}}},[["__file","C:/gitrepo/lib.venas.io/IBAX/scan.ibax.io/src/pages/chart/activeChart.vue"]]);export{E as default};
