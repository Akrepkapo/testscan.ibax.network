import{M as a,J as e,K as t,A as s,B as l,I as r}from"../element-plus/element-plus.9b08f88e.js";import{P as n}from"../PrintChart/PrintChart.b6b1b0be.js";import"../vue/vue.0c557d7c.js";import{C as i,b as o,d as c,a as p,f as d,D as m,E as u}from"../../assets/index.308fc099.js";import{_ as v}from"../vue-qr/vue-qr.8eb54fd4.js";import{e as b,t as h,X as f,c as j,a as g,u as _,T as y,R as $,K as x,P as w,F as C,o as T,L as V,a2 as z}from"../@vue/@vue.1ef17de0.js";import"../@vueuse/@vueuse.323b0efa.js";import"../@element-plus/@element-plus.be983530.js";import"../dayjs/dayjs.7a5f879f.js";import"../@intlify/@intlify.d33e2919.js";import"../lodash-es/lodash-es.e287ec0c.js";import"../@ctrl/@ctrl.17547d95.js";import"../escape-html/escape-html.d572c0fd.js";import"../@popperjs/@popperjs.12a79995.js";import"../normalize-wheel-es/normalize-wheel-es.db30398b.js";import"../chartProcess/chartProcess.96bb92a5.js";import"../dist/html2canvas.1285d1cf.js";import"../jspdf/jspdf.330a9a43.js";import"../@babel/@babel.fd5c2a4f.js";import"../fflate/fflate.f62025b3.js";import"../vue-axios/vue-axios.0d80ef0e.js";import"../decimal.js/decimal.js.77638b52.js";import"../vue-clipboard3/vue-clipboard3.f8057bcc.js";import"../clipboard/clipboard.eec53070.js";import"../vue-i18n/vue-i18n.7e9fb121.js";import"../vuex/vuex.81732143.js";import"../axios/axios.3ae77db0.js";import"../vue-router/vue-router.39fd13ca.js";import"../echarts/echarts.acca1833.js";import"../zrender/zrender.e63004cf.js";import"../tslib/tslib.e35f93b8.js";import"../echarts-gl/echarts-gl.c19cb34c.js";import"../claygl/claygl.59c2afb1.js";import"../centrifuge/centrifuge.c0d375ba.js";import"../vue-json-viewer/vue-json-viewer.cc585963.js";import"../path-browserify/path-browserify.3d3258d8.js";import"../js-binary-schema-parser/js-binary-schema-parser.f718aa23.js";const A={class:"chain"},P={class:"panel-content-chart"},k={class:"panel-content-chart-box"},M={class:"panel-date"},I={key:0,class:"panel-date-box"},N={class:"demonstration"},q={class:"panel-content-select"},B=g("div",{id:"activeChart",class:"ecolib-charts-item-line"},null,-1),K={class:"panel-table"},L={class:"panel-content-table"},S=g("span",{class:"panel-content-table-symbol"},"%",-1),U={class:"chain-account-item-symbol"},X={class:"panel-content-table-page"};var D=v({setup(v){const D=b(""),E=h("isMobile"),F=b("activeChart"),J=h("axios"),O=b("all"),R={search:"all"},Z={page:1,limit:10,startTime:"",endTime:""},G=async a=>{const e=await J.post("get_account_active_chart",a);if(0===e.code){Z.startTime=e.data.time[0],Z.endTime=e.data.time[e.data.time.length-1],Q(Z);const a=e.data.time.map((a=>1e3*a)),t=e.data.info.map(((e,t)=>(e.value=e.active_account,[a[t],e.active_account,e]))),s={legend:[o("chart.activeAddress")],series:[t]};D.value=`${o("chart.active")}`,C((()=>{c.handleLineToolArea("activeChart",D.value,s,!0);const a=c.activeChart;a.setOption({tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},formatter:a=>{const{data:e}=a[0],t=e[2];return`<div>\n          <div>\n          <span>${o("chart.activeAddress")}：</span>\n          <span>${p(t.active_account)}</span>\n          </div>\n          <div>\n          <span>${o("chart.totalAddress")}：</span>\n          <span>${p(t.total_key)}</span>\n          </div>\n          <div>\n          <span>${o("panel.proportion")}：</span>\n          <span>${t.ratio} %</span>\n          </div>\n          <div>\n          <span>${o("chart.ratio")}：</span>\n          <span>${t.relative_ratio} %</span>\n          </div>\n          <div>\n          <span>${o("chart.num")}：</span>\n          <span>${p(t.tx_number)}</span>\n          </div>\n          <div>\n          <span>${o("chart.amount")}：</span>\n          <span>${d(t.tx_amount)} ${o("page.symbol")}</span>\n          </div>\n          </div>`}}}),a.on("datazoom",(()=>{let e=a.getModel().option.dataZoom[0],t=e.startValue,s=e.endValue;Z.startTime=parseInt(t/1e3),Z.endTime=parseInt(s/1e3),Z.page=1,Q(Z)}))}))}};G(R);const H=f({data:[],page:1,limit:10,total:1}),Q=async a=>{const e=await J.post("get_account_active_list",a);0===e.code&&(H.data=e.data.list,H.page=e.data.page,H.limit=e.data.limit,H.total=e.data.total)},W=a=>{Z.page=a,Q(Z)},Y=b(""),aa=i(),ea=()=>"panel-date-cell",ta=a=>{R.search="",R.startTime=m(a[0]),R.endTime=m(a[1]),G(R)},sa=[{value:"all",label:o("chart.day")},{value:"1_month",label:o("chart.oneMonth")},{value:"3_month",label:o("chart.threeMonth")},{value:"1_year",label:o("chart.year")}],la=a=>{Y.value="",R.search=a,R.startTime=0,R.endTime=0,G(R)};return(i,o)=>{const c=a,m=e,v=t,b=n,h=s,f=l,C=r;return T(),j("div",A,[g("div",P,[g("div",k,[g("div",M,[_(E)?x("v-if",!0):(T(),j("div",I,[g("span",N,y(i.$t("chart.dateSelect"))+"：",1),$(c,{modelValue:Y.value,"onUpdate:modelValue":o[0]||(o[0]=a=>Y.value=a),type:"datetimerange","unlink-panels":"","time-arrow-control":"","range-separator":i.$t("chart.to"),"start-placeholder":i.$t("chart.startTime"),"end-placeholder":i.$t("chart.endTime"),shortcuts:_(aa),editable:!1,"popper-class":"panel-date-popper","cell-class-name":ea,onChange:ta},null,8,["modelValue","range-separator","start-placeholder","end-placeholder","shortcuts"])])),g("div",q,[$(v,{modelValue:O.value,"onUpdate:modelValue":o[1]||(o[1]=a=>O.value=a),placeholder:"Select",onChange:la},{default:w((()=>[(T(),j(V,null,z(sa,(a=>$(m,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])]),$(b,{id:F.value,title:D.value,class:"panel-date-print"},null,8,["id","title"])]),B,g("div",K,[g("div",L,[$(f,{data:_(H).data,stripe:"",style:{width:"100%"}},{default:w((()=>[$(h,{label:i.$t("chart.date")},{default:w((a=>[g("span",null,y(_(u)(a.row.time)),1)])),_:1},8,["label"]),$(h,{label:i.$t("chart.activeAddress")},{default:w((a=>[g("span",null,y(_(p)(a.row.active_account)),1)])),_:1},8,["label"]),$(h,{label:i.$t("chart.ratio")},{default:w((a=>[g("span",null,y(a.row.relative_ratio),1),S])),_:1},8,["label"]),$(h,{label:i.$t("chart.num")},{default:w((a=>[g("span",null,y(_(p)(a.row.tx_number)),1)])),_:1},8,["label"]),$(h,{label:i.$t("chart.amount")},{default:w((a=>[g("span",null,[g("span",null,y(_(d)(a.row.tx_amount)),1),g("span",U,y(i.$t("page.symbol")),1)])])),_:1},8,["label"])])),_:1},8,["data"])])]),g("div",X,[$(C,{small:"",background:"","hide-on-single-page":"",layout:"prev, pager, next","pager-count":_(E)?5:11,"current-page":Number(_(H).page),"page-size":Number(_(H).limit),total:Number(_(H).total),onCurrentChange:W},null,8,["pager-count","current-page","page-size","total"])])])])])}}},[["__file","C:/gitrepo/lib.venas.io/IBAX/scan.ibax.io/src/pages/chart/activeChart.vue"]]);export{D as default};
